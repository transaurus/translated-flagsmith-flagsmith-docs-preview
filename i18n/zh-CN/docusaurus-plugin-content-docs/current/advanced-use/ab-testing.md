---
title: A/B Testing
---

A/B测试使您能够对应用程序的设计和功能变体进行实验。产生的数据将让您放心地对应用进行修改，确保这些改动会产生积极的净效应。

您可以使用Flagsmith执行A/B测试。通过结合使用[多变量功能标志](/basic-features/managing-features.md#multi-variate-flags)和第三方分析工具如[Amplitude](https://amplitude.com/)或[Mixpanel](https://mixpanel.com/)，您可以轻松执行复杂的A/B测试来优化产品。

运行A/B测试需要两个核心组件：分桶引擎和分析平台。分桶引擎用于将用户分配到特定的A/B测试桶中，这些桶将控制被测试的具体用户体验。分析平台会接收来自用户行为的事件数据流。结合这两个概念，您就能实现无缝的A/B测试。

我们已与多家分析平台建立了[集成](integrations/overview.md)。若您使用的平台尚未支持，仍可手动将测试数据发送至下游平台。

## 概述 - 测试新的Paypal按钮

本例中，假设我们现有应用仅支持信用卡支付。我们推测可能因缺少Paypal支付选项而流失潜在客户，将通过测试添加Paypal支付选项是否能提升结账转化率。

由于平台用户基数庞大，我们不希望对全部用户进行测试。计划将90%用户排除在测试外，剩余用户中5%展示新Paypal按钮，另5%不展示。因此设置三个测试桶：

1. 排除组（对照组）
2. Paypal测试按钮组
3. 不显示Paypal按钮的测试组

Flagsmith的功能标志同时支持布尔状态和多变量值，我们将利用这两特性：用布尔标志控制是否进行测试；若标志为`enabled`，则检查多变量值。本例中仅当值为`show`时展示Paypal按钮。

## 创建测试

执行A/B测试需完成以下步骤：

1. 创建新的[多变量功能标志](/basic-features/managing-features.md#multi-variate-flags)控制用户分入三个测试桶，命名为`paypal_button_test`。设置三个变量选项：
   
   1. 对照组 - 90%用户
   2. Paypal按钮组 - 5%用户
   3. 不显示按钮的测试组 - 5%用户

2. 在应用中，用户开始结账流程前需先进行[身份识别](/basic-features/managing-identities.md)。所有Flagsmith多变量标志都要求识别用户以确保分桶可复现。
3. 用户进入结账页面时，检查该用户`paypal_button_test`标志的`value`。若值为`show`则展示Paypal支付按钮，否则隐藏。
4. 向分析平台发送事件消息，添加`paypal_button_test`的键值对，其值为`control`、`show`或`hide`之一。
5. 部署应用，启用功能标志，观察分析平台的数据流入情况。

下图展示了功能标志的创建过程。

![图片](/img/ab-test-paypal-example.png)

## 测试评估

测试设置完成且功能标志启用后，数据将开始流入分析平台。此时我们可以根据新按钮引发的用户行为变化来评估测试结果。

## 匿名/未知身份标识

进行A/B测试必须使用身份标识。若缺乏作为键值的身份标识，平台将无法为用户提供一致的体验。

如果需要在无法识别用户身份的应用程序区域（例如网站首页）运行A/B测试怎么办？此时需要为这些用户生成_匿名身份标识_值——通常我们会为每个用户生成一个_GUID_。

_GUID_值本质上是一个具有极高唯一概率的随机字符串。关于生成GUID值的更多信息可参阅[Stack Overflow上的解答](https://stackoverflow.com/a/2117523)。

通用流程如下：

1. 新用户首次访问网站首页
2. 系统识别到匿名用户后，为其生成随机_GUID_并分配
3. 将该GUID通过Identify调用发送至Flagsmith平台完成用户分群
4. 在浏览器中设置cookie存储该GUID，确保用户再次访问时仍处于相同分群组

具体实现方式因开发平台而异，但核心逻辑保持一致。