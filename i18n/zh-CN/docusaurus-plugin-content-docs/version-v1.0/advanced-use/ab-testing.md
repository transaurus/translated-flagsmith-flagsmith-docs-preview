---
title: A/B Testing
---

A/B测试使您能够对应用程序的设计和功能变体进行实验。生成的数据将帮助您安全地修改应用，确保这些改动会产生积极影响。

您可以使用Flagsmith执行A/B测试。通过结合[多变量功能开关](/basic-features/managing-features.md#multi-variate-flags)与第三方分析工具如[Amplitude](https://amplitude.com/)或[Mixpanel](https://mixpanel.com/)，您可以轻松实施复杂的A/B测试来优化产品。

运行A/B测试需要两个核心组件：分桶引擎和分析平台。分桶引擎用于将用户分配到特定测试分组，这些分组控制着被测试的用户体验。分析平台则接收来自用户行为的事件数据流。二者的结合能实现无缝的A/B测试。

我们已与多个分析平台建立[集成](integrations/overview.md)。若您使用的平台尚未支持，仍可手动将测试数据发送至目标平台。

## 概述 - 测试新的Paypal按钮

假设我们有一个目前仅支持信用卡支付的应用程序。我们推测可能因缺少Paypal支付选项而流失潜在客户。现计划测试添加Paypal支付是否能提升结账转化率。

由于平台用户基数庞大，我们不希望对全部用户进行测试。计划将90%用户排除在测试外，剩余10%中：5%用户看到新Paypal按钮，另5%用户不显示该按钮。因此形成三个分组：

1. 对照组（排除测试的用户）
2. Paypal测试按钮组
3. 不显示Paypal按钮的测试组

Flagsmith的功能开关同时支持布尔状态和多变量值。我们将用布尔状态控制是否进行测试，若开关启用则检查多变量值。本示例中仅当值为`show`时显示Paypal按钮。

## 创建测试

实施A/B测试需完成以下步骤：

1. 创建新的[多变量功能开关](/basic-features/managing-features.md#multi-variate-flags)控制用户分组，命名为`paypal_button_test`。设置三个变量选项：
   
   1. 对照组 - 90%用户
   2. Paypal按钮组 - 5%用户
   3. 不显示按钮的测试组 - 5%用户

2. 在应用程序中，用户开始结账流程前需先进行[身份识别](/basic-features/managing-identities.md)。所有多变量功能开关都需要识别用户以确保分组可复现。
3. 到达结账页面时，检查该用户的`paypal_button_test`开关值。若为`show`则显示Paypal支付按钮，否则隐藏。
4. 向分析平台发送事件消息，添加`paypal_button_test`的键值对，其值为`control`、`show`或`hide`之一。
5. 部署应用，启用功能开关，观察分析平台的数据反馈。

下图展示了功能开关的创建过程。

![图片](/img/ab-test-paypal-example.png)

## 测试评估

测试设置完成且功能标志启用后，数据将开始流入分析平台。此时我们可以根据新按钮引发的用户行为变化来评估测试结果。

## 匿名/未知身份标识

进行A/B测试必须使用身份标识。若没有身份标识作为键值，平台将无法为用户提供一致的体验。

如果需要在无法识别用户身份的环节（例如网站首页）进行A/B测试怎么办？此时需要为这些用户生成_匿名身份标识_值——通常是一个_GUID_（全局唯一标识符）。

_GUID_本质上是一个具有极高唯一概率的随机字符串。关于生成GUID的更多信息可参考[Stack Overflow上的讨论](https://stackoverflow.com/a/2117523)。

通用流程如下：

1. 新访客首次访问网站首页
2. 检测到匿名用户后，为其生成随机_GUID_
3. 将该GUID通过Identify调用发送至Flagsmith进行用户分群
4. 通过浏览器cookie存储该GUID，确保用户再次访问时仍处于相同分群组

具体实现方案会因开发平台不同而有所差异，但核心逻辑保持一致。