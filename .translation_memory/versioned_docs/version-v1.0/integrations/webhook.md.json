{
  "source_file_path_relative_to_docusaurus_root": "versioned_docs/version-v1.0/integrations/webhook.md",
  "source_file_content_hash": "494e732fc92e82c2487302bb86fdafac708c5dd7bb55998003e4493c667d984e",
  "segments": [
    {
      "segment_id": "58cfcc64",
      "source_content": "---\ntitle: Webhook Analytics Integration\ndescription: Integrate Flagsmith with your own infrastructure\nsidebar_label: Webhook\nhide_title: true\n---",
      "source_content_hash": "410a33a457601f2effc8420efa46b2c08600be115d917089c9346ffc8f37e688",
      "node_type": "yaml",
      "translatable": false,
      "translations": {
        "zh-CN": "@@untranslatable_placeholder_58cfcc64"
      }
    },
    {
      "segment_id": "3fbbcc07",
      "source_content": "![Webhook](/img/integrations/webhook/webhook-logo.svg)",
      "source_content_hash": "4dba701f4eb071d0129f9f482b52343dc03474d110035f7f3f8b92a336c09ce8",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "![Webhook](/img/integrations/webhook/webhook-logo.svg)"
      }
    },
    {
      "segment_id": "7e5c5a39",
      "source_content": "You can integrate Flagsmith with your own data warehouse using our Webhook integration. The integration automatically\nsends the flag states for identified users as a webhook, to a URL you specify, for cohort analysis, A/B testing and\nmore. The process is as follows:",
      "source_content_hash": "efff9328483852e500e0f7232b37a363a6a229ba1c7b869900173d059724ec14",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "您可以通过Webhook集成将Flagsmith与自有数据仓库对接。该集成会自动将已识别用户的特征标志状态以Webhook形式发送至您指定的URL，用于队列分析、A/B测试等场景。具体流程如下："
      }
    },
    {
      "segment_id": "70153c6e",
      "source_content": "## Integration Setup",
      "source_content_hash": "42eeb793ab64304e5c9607a7548631a7e61c3a4aa782d56d87f97c42e486f90f",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-CN": "## 集成配置"
      }
    },
    {
      "segment_id": "4ddf6ae7",
      "source_content": "1. Write an endpoint that accepts the [JSON schema](#webhook-json-schema) defined below\n2. Add the integration in Flagsmith, providing your URL created in the step above.\n3. You can also provide a Secret which will be [hashed and included in the HTTP header](#webhook-signature). This will\n   allow you to verify that the Webhook has come from Flagsmith.\n4. All API calls generated by the Flagsmith SDK to the `Get Identity Flags` endpoint will send the a full set of flag\n   evaluations, traits and segments for that particular user to your webhook URL.",
      "source_content_hash": "d5f2ff3ebad435b9c14a3a935506afca2fdc9b393b6b41ff37b0c2f4e0bd6543",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "zh-CN": "1. 编写一个能接收下方定义的[JSON结构](#webhook-json-schema)的API端点\n2. 在Flagsmith中添加集成，提供上一步创建的URL\n3. 您还可配置密钥，该密钥会经过[哈希处理后包含在HTTP头信息](#webhook-signature)中，用于验证Webhook请求确实来自Flagsmith\n4. 所有通过Flagsmith SDK调用「获取用户特征标志」接口时，系统都会将该用户的完整特征标志评估结果、用户属性及所属用户组信息发送至您的Webhook URL"
      }
    },
    {
      "segment_id": "40f9552a",
      "source_content": "## Webhook JSON Schema",
      "source_content_hash": "e4c1bd64397a110aac00c3a1a9d9955862f8eebfd948eeb2da2ac249599cbb38",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-CN": "## Webhook JSON数据结构"
      }
    },
    {
      "segment_id": "f2c2bdd0",
      "source_content": "Flagsmith will send a `POST` request to the Webhook url you provide, with the following payload in the body:",
      "source_content_hash": "efd445cfd066b45d34f03250f1cc35e94505a2309105c7612085b9d163199ff0",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "Flagsmith会向您提供的URL发送`POST`请求，请求体包含以下数据结构："
      }
    },
    {
      "segment_id": "08021a08",
      "source_content": "```json\n{\n \"flags\": [\n  {\n   \"enabled\": false,\n   \"environment\": 2,\n   \"feature\": {\n    \"created_date\": \"2022-02-04T14:57:39.200798Z\",\n    \"default_enabled\": false,\n    \"description\": null,\n    \"id\": 1,\n    \"initial_value\": null,\n    \"name\": \"12e12e\",\n    \"type\": \"STANDARD\"\n   },\n   \"feature_segment\": null,\n   \"feature_state_value\": null,\n   \"id\": 2,\n   \"identity\": null\n  },\n  {\n   \"enabled\": true,\n   \"environment\": 2,\n   \"feature\": {\n    \"created_date\": \"2022-02-04T14:57:44.244575Z\",\n    \"default_enabled\": true,\n    \"description\": null,\n    \"id\": 2,\n    \"initial_value\": null,\n    \"name\": \"gggg\",\n    \"type\": \"STANDARD\"\n   },\n   \"feature_segment\": null,\n   \"feature_state_value\": null,\n   \"id\": 4,\n   \"identity\": null\n  }\n ],\n \"identity\": \"user_test\",\n \"segments\": [\n  {\n   \"id\": 1,\n   \"member\": true,\n   \"name\": \"test_segment\"\n  }\n ],\n \"traits\": [\n  {\n   \"id\": 4,\n   \"trait_key\": \"222\",\n   \"trait_value\": 333\n  },\n  {\n   \"id\": 5,\n   \"trait_key\": \"aaa\",\n   \"trait_value\": \"bbb\"\n  }\n ]\n}\n```",
      "source_content_hash": "4b51ff0affcc6203373e8c632cb635d9da5801fa5774a469834faea666ddd966",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-CN": "@@untranslatable_placeholder_08021a08"
      }
    },
    {
      "segment_id": "2e771fd0",
      "source_content": "## Use Case",
      "source_content_hash": "3ae33cbfd3d67078b12dd943b2e9e8251e5180d47247c2199188c8f88a57d562",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-CN": "## 使用场景"
      }
    },
    {
      "segment_id": "0750bfa1",
      "source_content": "Once the integration has been set up, you can start segmenting your data warehouse users based on the flags that they\nsaw and the Segments that they are a member of. This allows you to enrich the data within your warehouse through\nFlagsmith.",
      "source_content_hash": "6766ee79a73c952bcea7b555ac3e8979c34d28987fe8b7928f7e52079e674219",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "完成集成配置后，您可以根据用户接触到的特征标志及其所属用户组，对数据仓库中的用户进行分群。这使您能够通过Flagsmith增强数据仓库中的信息维度。"
      }
    },
    {
      "segment_id": "f6b04a59",
      "source_content": "## Webhook Signature",
      "source_content_hash": "b9d2750f144b54e912087e6d43b96db6d36b886b2bd6dc2914ec3caf10764c49",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-CN": "## Webhook签名验证"
      }
    },
    {
      "segment_id": "a311e967",
      "source_content": "When your webhook secret is set, Flagsmith uses it to create a hash signature with each payload. This hash signature is\npassed with each request under the X-Flagsmith-Signature header that you need to validate at your end",
      "source_content_hash": "8b17bf9aa3c8894cd3a9414bf5ba969e0aa59f98b6aa40d66689b172075958c2",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "当您设置Webhook密钥后，Flagsmith会使用该密钥为每个请求生成哈希签名。该签名会通过X-Flagsmith-Signature请求头传递，您需要在接收端进行验证"
      }
    },
    {
      "segment_id": "e06c002e",
      "source_content": "### Validating Signature",
      "source_content_hash": "53c4e1362f2aa49c51236ee8b342993849ec88294e295f496ceee51d6698e3b1",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "zh-CN": "### 签名验证方法"
      }
    },
    {
      "segment_id": "25212439",
      "source_content": "Compute an HMAC with the SHA256 hash function. Use request body (raw utf-8 encoded string) as the message and secret\n(utf8 encoded) as the Key. Here is one example in Python:",
      "source_content_hash": "aa73d4679af12a1f9be87afe53a13f0d85b8f2e7e4998c2ecab4be295b47d03c",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "zh-CN": "使用SHA256哈希函数计算HMAC。将请求体（原始utf-8编码字符串）作为消息，密钥（utf8编码）作为密钥。以下是Python示例："
      }
    },
    {
      "segment_id": "1cf51900",
      "source_content": "```python\nimport hmac\n\nsecret = \"my shared secret\"\n\nexpected_signature = hmac.new(\n    key=secret.encode(),\n    msg=request_body,\n    digestmod=hashlib.sha256,\n).hexdigest()\n\nreceived_signature = request[\"headers\"][\"x-flagsmith-signature\"]\nhmac.compare_digest(expected_signature, received_signature) is True\n```",
      "source_content_hash": "0ead67595198eed8e0b554237d5f1ef28c6705196968bac0092eb515fd9e4209",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "zh-CN": "@@untranslatable_placeholder_1cf51900"
      }
    }
  ],
  "target_i18n_subpath": "docusaurus-plugin-content-docs/version-v1.0/integrations/webhook.md",
  "last_updated_timestamp": "2025-06-08T19:31:17.938130+00:00",
  "schema_version": "1.0",
  "translated_versions": {
    "zh-CN": "494e732fc92e82c2487302bb86fdafac708c5dd7bb55998003e4493c667d984e"
  }
}